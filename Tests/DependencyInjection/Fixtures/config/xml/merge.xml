<?xml version="1.0" encoding="UTF-8"?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:rhapsody="http://symfony.com/schema/dic/rhapsody/security"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd
                        http://symfony.com/schema/dic/rhapsody/security http://symfony.com/schema/dic/rhapsody/security/rhapsody-security-1.0.xsd">

    <imports>
        <import resource="merge_import.xml"/>
    </imports>

    <rhapsody:config db-driver="custom">

        <rhapsody:jwt enabled="true" public-key-path="/alt/location/of/jwt/public.key" private-key-path="/alt/location/of/jwt/private.key" pass-phrase="secret" token-ttl="86400">
            
            <rhapsody:payload>
                <rhapsody:claim id="identity" name="foo" property="bar" required="true" />
                <rhapsody:claim id="email" name="email" />
                <rhapsody:claim id="subject" name="sub" property="id" />
            </rhapsody:payload>

            <rhapsody:encoder service="rhapsody_security.jwt.encoder.lcobucci" signature-algorithm="RS256" crypto-engine="phpseclib" />

        </rhapsody:jwt>

    </rhapsody:config>

</container>